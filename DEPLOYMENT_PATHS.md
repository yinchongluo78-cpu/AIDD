# æœåŠ¡å™¨éƒ¨ç½²è·¯å¾„è¯´æ˜

## âš ï¸ é‡è¦ï¼šæ­£ç¡®çš„éƒ¨ç½²ç›®å½•

### PM2 è¿è¡Œç›®å½•ï¼ˆå¿…é¡»éƒ¨ç½²åˆ°è¿™é‡Œï¼‰
```
/root/myproject/lyc2/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ dist/          â† APIç¼–è¯‘åçš„æ–‡ä»¶ï¼ŒPM2ä»è¿™é‡Œè¿è¡Œ
â””â”€â”€ web/
    â””â”€â”€ dist/          â† å‰ç«¯æ„å»ºæ–‡ä»¶
```

### Nginx é™æ€æ–‡ä»¶ç›®å½•
```
/var/www/lyc2/
â””â”€â”€ web/               â† Nginxæä¾›å‰ç«¯é™æ€æ–‡ä»¶
```

## ğŸ“ å†å²é—ç•™ç›®å½•ï¼ˆä¸è¦éƒ¨ç½²åˆ°è¿™é‡Œï¼ï¼‰

è¿™äº›æ˜¯æ—§ç‰ˆæœ¬ç•™ä¸‹çš„ç›®å½•ï¼Œ**ä¸å†ä½¿ç”¨**ï¼š

```
/var/www/api/          âŒ æ—§ç‰ˆAPIï¼Œå·²åºŸå¼ƒ
/var/www/web/          âŒ æ—§ç‰ˆå‰ç«¯ï¼Œå·²åºŸå¼ƒ
/var/www/lyc-ai/       âŒ ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå·²åºŸå¼ƒ
```

## ğŸš€ æ­£ç¡®çš„éƒ¨ç½²æµç¨‹

### API éƒ¨ç½²
```bash
cd /Users/luoyinchong/Desktop/lyc2/api
./deploy-api.sh
```

### å‰ç«¯éƒ¨ç½²
```bash
cd /Users/luoyinchong/Desktop/lyc2/web
npm run build
sshpass -p "Lyc001286" scp -P 2222 -r dist/* root@120.24.22.244:/var/www/lyc2/web/
```

## ğŸ” éªŒè¯éƒ¨ç½²

### æ£€æŸ¥ PM2 è¿è¡Œè·¯å¾„
```bash
ssh root@120.24.22.244 -p 2222
pm2 describe super-scholar-api | grep "script path"
```

åº”è¯¥æ˜¾ç¤ºï¼š`/root/myproject/lyc2/api/dist/index.js`

### æ£€æŸ¥æ–‡ä»¶æ›´æ–°æ—¶é—´
```bash
ssh root@120.24.22.244 -p 2222
stat -c '%y' /root/myproject/lyc2/api/dist/routes/conversations.js
```

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¯å¾„æ··ä¹±ï¼Ÿ

1. **9æœˆåº•**ï¼šæœ€åˆéƒ¨ç½²åœ¨ `/var/www/`ï¼ˆä¼ ç»ŸWebæœåŠ¡å™¨ä½ç½®ï¼‰
2. **11æœˆåˆ**ï¼šè¿ç§»åˆ° `lyc-ai` é¡¹ç›®
3. **11æœˆ5æ—¥**ï¼šé‡æ„ä¸º `lyc2` é¡¹ç›®ï¼Œç§»åˆ° `/root/myproject/`
4. **é—®é¢˜**ï¼šæ—§ç›®å½•æ²¡æœ‰åˆ é™¤ï¼Œå¯¼è‡´æ··æ·†

ç°åœ¨ç»Ÿä¸€ä½¿ç”¨ `/root/myproject/lyc2/` ä½œä¸ºPM2è¿è¡Œç›®å½•ã€‚
