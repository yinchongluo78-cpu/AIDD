# 产品功能对比与改进建议

## 一、当前产品功能清单

### 1. 核心对话功能
- ✅ 基础对话（DeepSeek Chat）
- ✅ 流式响应
- ✅ 对话历史保存
- ✅ 对话列表管理（创建、重命名、删除）
- ✅ 自动生成对话标题

### 2. 特色功能
- ✅ 图片上传 + OCR 识别（阿里云通义千问）
- ✅ 文档上传（对话/知识库）
- ✅ 知识库系统（分类管理、文档检索）
- ✅ **自定义指令**（每个对话独立设置）

### 3. 文件处理
- ✅ PDF/DOCX/TXT/MD 解析
- ✅ 文档切片存储（400字/片）
- ✅ 关键词检索
- ✅ 批量上传（知识库）

### 4. 用户管理
- ✅ 邮箱注册登录
- ✅ 个人资料管理
- ✅ 头像设置

---

## 二、ChatGPT Custom Instructions 功能详解

### 核心特点

**1. 全局设置 vs 对话级设置**
- ChatGPT：**全局设置**，一次设置后所有新对话都生效
- 你的产品：**对话级设置**，每个对话单独设置

**2. 双输入框设计**
ChatGPT 的 Custom Instructions 分为两个部分：

**第一部分："What would you like ChatGPT to know about you?"**
（ChatGPT 应该了解你的什么信息？）
- 你的背景（职业、年龄、兴趣等）
- 你的目标（学习目标、工作任务等）
- 你的偏好（语言、内容风格等）

示例：
```
我是一名初中二年级学生，正在学习人教版数学和物理。
我的数学基础一般，需要更多的练习和解释。
我喜欢通过实例理解概念。
```

**第二部分："How would you like ChatGPT to respond?"**
（你希望 ChatGPT 如何回应？）
- 回答风格（简洁/详细、正式/随意）
- 回答结构（列表/段落、是否需要代码示例）
- 语言要求（中文/英文、专业术语程度）

示例：
```
用简单的语言解释，适合初中生理解。
每个概念都给出 1-2 个实例。
用启发式提问引导我思考，不要直接给答案。
先让我尝试自己解决，再给提示。
```

**3. 作用范围**
- ✅ 对**所有新对话**生效
- ✅ 可以在设置中随时修改
- ✅ 单次对话中也可以临时覆盖

**4. 字符限制**
- 每个输入框 1,500 字符

---

## 三、产品功能对比分析

| 对比维度 | 你的产品 | ChatGPT | 优劣分析 |
|---------|---------|---------|---------|
| **设置范围** | 对话级（每个对话单独设置） | 全局级（所有新对话生效） | ❌ **你的产品不如 GPT** |
| **输入框设计** | 单个文本框（混合输入） | 双输入框（关于你 + 回应方式） | ❌ **你的产品不如 GPT** |
| **使用便捷性** | 需要每次创建对话时设置 | 设置一次，永久生效 | ❌ **你的产品不如 GPT** |
| **功能引导** | 无明确提示用户如何填写 | 有清晰的两个问题引导 | ❌ **你的产品不如 GPT** |
| **灵活性** | 每个对话可以不同（更灵活） | 全局统一（不够灵活） | ✅ **你的产品更好** |
| **可见性** | 顶部状态栏显示是否启用 | 设置中管理 | ✅ **你的产品更好** |

---

## 四、主要差距分析

### 差距1：缺少全局级自定义指令 ❌ **严重**

**问题**：
- 用户每次创建新对话都要重新设置指令
- 如果用户想让所有对话都用同样的学习方法，非常繁琐
- 无法设置"默认行为"

**ChatGPT 的优势**：
- 设置一次，所有新对话自动应用
- 用户体验更流畅

**影响**：
- 8-15岁学生可能不会每次都设置
- 家长设置后希望长期生效，而不是每次重复

---

### 差距2：单输入框设计不够清晰 ❌ **中等**

**问题**：
- 用户不知道应该写什么内容
- 容易把"关于自己"和"回应要求"混在一起
- 没有明确的引导

**ChatGPT 的优势**：
- 双输入框分离关注点
  - 框1：关于你的信息（背景、目标）
  - 框2：期望的回应方式（风格、结构）
- 每个框上方有清晰的问题引导

**影响**：
- 用户可能写出模糊的指令
- 教学效果不如预期

---

### 差距3：缺少指令模板/示例 ❌ **中等**

**问题**：
- 用户（尤其是学生和家长）不知道如何写好的指令
- 没有参考示例

**ChatGPT 的做法**：
- 官方提供大量示例
- 社区分享最佳实践

**影响**：
- 功能使用率低
- 用户写出的指令质量参差不齐

---

### 差距4：对话级设置的持久化问题 ⚠️ **轻微**

**问题**：
- 虽然每个对话可以单独设置，但用户可能希望：
  - "这是我的默认设置"
  - "某些对话用特殊设置"

**ChatGPT 的做法**：
- 全局默认设置
- 单次对话可以临时覆盖

**影响**：
- 灵活性不足（只能对话级，不能设默认）

---

## 五、改进建议（按优先级排序）

### 🔴 优先级1：增加全局自定义指令（重要且紧急）

**方案A：双层设置（推荐）**
```
全局设置（用户级）
├── 用户在个人设置中配置"默认学习指令"
├── 所有新对话默认使用这个指令
└── 每个对话可以选择：
    ├── 使用全局指令
    ├── 自定义本对话指令
    └── 不使用指令（默认模式）
```

**实现方案**：
1. 数据库：User 表添加 `defaultInstructions` 字段
2. 个人设置页面：添加"默认学习指令"设置
3. 创建对话时：
   - 默认继承用户的 `defaultInstructions`
   - 用户可以选择"使用默认"或"自定义"
4. 对话设置：添加选项
   - ⚪ 使用默认指令
   - ⚪ 自定义指令
   - ⚪ 不使用指令

**用户体验**：
```
场景1：家长设置默认指令
→ 所有新对话自动应用
→ 无需每次重复设置

场景2：学生想临时改变学习方式
→ 单个对话中自定义指令
→ 不影响其他对话

场景3：普通提问（不需要学习指导）
→ 选择"不使用指令"
→ AI 直接回答
```

---

### 🟠 优先级2：双输入框设计（重要不紧急）

**改进方案**：

**当前设计**：
```
┌─────────────────────────────┐
│ 自定义指令（可选）           │
│ ┌─────────────────────────┐ │
│ │                         │ │
│ │  [大文本框]              │ │
│ │                         │ │
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

**改进后设计**：
```
┌─────────────────────────────────────────┐
│ 设置学习指令                             │
├─────────────────────────────────────────┤
│                                         │
│ 📝 关于你的学习情况                      │
│ （告诉AI你的年级、学习目标、薄弱环节等） │
│ ┌─────────────────────────────────────┐ │
│ │ 例如：我是初二学生，正在学习人教版... │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ 🎯 你希望AI如何引导你学习                │
│ （说明学习流程、回答方式、是否给答案等） │
│ ┌─────────────────────────────────────┐ │
│ │ 例如：先让我预习，再给练习题，用启发... │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [清除指令]  [保存]                       │
└─────────────────────────────────────────┘
```

**实现改动**：
1. 数据库：
   - Conversation 表：
     - `customInstructions` → `aboutYou` (TEXT)
     - 新增：`responseStyle` (TEXT)
   - User 表：
     - 新增：`defaultAboutYou` (TEXT)
     - 新增：`defaultResponseStyle` (TEXT)

2. 前端：
   - 两个独立的 textarea
   - 每个框上方有清晰的标题和示例
   - 占位符文字给出具体例子

3. 后端：
   - 拼接两个字段：`aboutYou + "\n\n" + responseStyle`
   - 作为完整的系统消息发送给 AI

---

### 🟡 优先级3：提供指令模板库（重要不紧急）

**方案**：在设置指令弹窗中，增加"快速选择模板"

**界面设计**：
```
┌─────────────────────────────────────┐
│ 设置学习指令                         │
├─────────────────────────────────────┤
│                                     │
│ 💡 快速选择模板                      │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│ │数学  │ │英语 │ │作文  │ │物理 │   │
│ │学习  │ │练习 │ │辅导  │ │实验 │   │
│ └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
│ 📝 关于你的学习情况                  │
│ ┌───────────────────────────────┐   │
│ │ [自动填充选中模板的内容]         │   │
│ └───────────────────────────────┘   │
│                                     │
│ 🎯 你希望AI如何引导你学习            │
│ ┌───────────────────────────────┐   │
│ │ [自动填充选中模板的内容]         │   │
│ └───────────────────────────────┘   │
└─────────────────────────────────────┘
```

**预设模板示例**：

**模板1：数学学习（启发式）**
```json
{
  "name": "数学学习（启发式）",
  "aboutYou": "我是初中生，正在学习人教版数学，基础一般，需要更多练习。",
  "responseStyle": "按照以下流程引导我：\n1. 预习：让我先阅读概念，检查理解\n2. 练习：给我由易到难的题目\n3. 反思：分析我的错误原因\n4. 复盘：总结知识点和易错点\n\n用启发式提问，不要直接给答案。"
}
```

**模板2：英语口语练习**
```json
{
  "name": "英语口语练习",
  "aboutYou": "我想提高英语口语能力，词汇量有限，语法基础薄弱。",
  "responseStyle": "用简单的英语和我对话，每次纠正我的错误，并给出正确表达。不要用太难的词汇，多用日常场景对话。"
}
```

**模板3：作文辅导**
```json
{
  "name": "作文辅导",
  "aboutYou": "我需要提升写作能力，经常不知道怎么开头和展开。",
  "responseStyle": "引导我按照：\n1. 审题：理解题目要求\n2. 构思：帮我列提纲\n3. 写作：提醒注意事项\n4. 修改：给出具体修改建议和范例\n\n每一步都等我完成后再进入下一步。"
}
```

**实现方案**：
1. 前端：硬编码 5-8 个常用模板
2. 点击模板自动填充两个输入框
3. 用户可以在模板基础上修改
4. （未来）可以保存自己的模板

---

### 🟢 优先级4：改进指令可见性和管理（次要）

**当前状态**：
- ✅ 顶部有状态栏显示是否启用（好）
- ❌ 但没有快速预览指令内容

**改进方案**：

**方案A：Hover 预览**
鼠标悬停在"已启用自定义指令"上，显示指令内容预览（前100字）

**方案B：快速查看按钮**
```
[✓ 已启用自定义指令] [查看] [修改]
                       ↓
                   弹出浮层显示完整指令
```

**方案C：对话列表显示标识**
```
对话列表
├── 📝 数学练习（有指令）
├── 💬 普通提问
├── 📝 英语口语（有指令）
└── 💬 作业帮助
```

---

### 🔵 优先级5：增加指令变量功能（未来扩展）

**高级功能**：允许指令中使用变量

**示例**：
```
我是{年级}学生，正在学习{教材版本}{学科}{册别}。
我的{学科}基础{水平}，需要{学习重点}。

变量填写：
- 年级：初二
- 教材版本：人教版
- 学科：数学
- 册别：八年级上册
- 水平：一般
- 学习重点：更多练习和解释
```

**优势**：
- 模板化、结构化
- 用户填空即可
- 降低使用门槛

---

## 六、实施优先级总结

### 立即实施（本周）
1. ✅ **增加全局自定义指令**（双层设置）
   - 工作量：3-4小时
   - 影响：极大提升用户体验
   - ROI：⭐⭐⭐⭐⭐

### 近期实施（1-2周）
2. ✅ **提供指令模板库**（5-8个预设模板）
   - 工作量：2-3小时
   - 影响：降低使用门槛，提高功能使用率
   - ROI：⭐⭐⭐⭐

3. ✅ **双输入框设计**
   - 工作量：4-5小时（含数据库迁移）
   - 影响：指令质量提升
   - ROI：⭐⭐⭐⭐

### 未来规划（1个月后）
4. ⭐ **改进指令可见性**（Hover预览、列表标识）
   - 工作量：2小时
   - 影响：用户体验优化
   - ROI：⭐⭐⭐

5. ⭐ **指令变量功能**（高级功能）
   - 工作量：6-8小时
   - 影响：进一步降低门槛
   - ROI：⭐⭐⭐

---

## 七、其他发现的产品差距

### 1. 缺少对话搜索功能
- ChatGPT：可以搜索历史对话
- 你的产品：只能滚动查找
- **建议**：添加对话搜索框

### 2. 缺少对话导出功能
- ChatGPT：可以导出对话记录
- 你的产品：无导出功能
- **建议**：添加"导出为 PDF/TXT"

### 3. 缺少对话分享功能
- ChatGPT：可以生成分享链接
- 你的产品：无分享功能
- **建议**：（未来）家长可以查看孩子的学习对话

### 4. 缺少多轮对话上下文管理
- ChatGPT：用户可以查看对话占用的 token
- 你的产品：无可见的上下文管理
- **建议**：显示当前对话长度，提示是否开始新对话

### 5. 知识库检索结果不够明显
- 当前：AI回答中标注引用，但不够醒目
- **建议**：
  - 引用的文档片段用引用框高亮显示
  - 可以点击跳转到原文档

---

## 八、总结

### 当前产品的优势
1. ✅ 对话级指令设置（更灵活）
2. ✅ 知识库系统（差异化竞争力）
3. ✅ OCR 图片识别（学习场景适配）
4. ✅ 指令状态可见（顶部状态栏）

### 主要差距
1. ❌ 缺少全局级指令设置
2. ❌ 单输入框设计不够清晰
3. ❌ 缺少指令模板和引导
4. ❌ 功能使用门槛较高

### 核心建议
**最重要的改进是：增加全局自定义指令 + 双输入框设计 + 模板库**

这三个改进可以：
- 大幅提升用户体验（不用每次重复设置）
- 降低使用门槛（模板+引导）
- 提高功能使用率（家长和学生都能轻松上手）

**预计改进后**：
- 自定义指令使用率：从 <10% 提升到 >50%
- 用户满意度：提升 30%+
- 学习效果：更符合个性化需求
