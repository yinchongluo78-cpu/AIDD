#!/usr/bin/expect -f
set timeout 30
set password "Lyc001286"

spawn ssh root@120.24.22.244
expect {
    "password:" {
        send "$password\r"
    }
}

expect "# "

puts "\n重启 PM2 服务..."
send "pm2 restart lyc-ai-api\r"
expect "# "
sleep 2

puts "\n检查服务状态..."
send "pm2 list\r"
expect "# "

puts "\n测试 API..."
send "curl -s http://localhost:3003/api/health\r"
expect "# "

puts "\n完成！请刷新浏览器页面测试"

send "exit\r"
expect eof
